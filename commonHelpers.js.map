{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  return `\n    <li class=\"card\">\n      <a href=\"${largeImageURL}\" data-caption=\"${tags}\">\n        <img class=\"card-image\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\"/>\n        <ul class=\"discription-list\">\n          <li>\n            <h3 class=\"disc-name\">Likes</h3>\n            <p class=\"disc-value\">${likes}</p>\n          </li>\n          <li>\n            <h3 class=\"disc-name\">Views</h3>\n            <p class=\"disc-value\">${views}</p>\n          </li>\n          <li>\n            <h3 class=\"disc-name\">Comments</h3>\n            <p class=\"disc-value\">${comments}</p>\n          </li>\n          <li>\n            <h3 class=\"disc-name\">Downloads</h3>\n            <p class=\"disc-value\">${downloads}</p>\n          </li>\n        </ul>\n      </a>\n    </li>`;\n}\n\n","\nimport axios from 'axios'\n// const KEY = '42649910-6a5238a097d86367028b0f975';\n// const PARAM = \"image_type=photo&orientation=horizontal&safesearch=true\";\n\n\nexport async function fetchData(inputWord, perPage, page) {\n  const formattedInput = inputWord.split(' ').join('+');\n  const totalImg = perPage * page;\n  const instance = axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n      q: formattedInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: perPage,\n      page: page,\n      key: '42649910-6a5238a097d86367028b0f975'\n    }\n  });\n\n  try {\n    const response = await instance.get();\n    if (response.status !== 200) {\n      throw new Error(`${response.status}`);\n    }\n\n       return response.data.hits;\n  } catch (error) {\n    throw new Error(`Failed to fetch data: ${error.message}`);\n  }\n}","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { createCard } from './js/render-functions.js'\nimport { fetchData } from './js/pixabay-api.js';\n\nconst getForm = document.querySelector(\"form\");\nlet inputWord;\nconst getList = document.querySelector(\"ul#image-list\");\nconst loader = document.querySelector('.loader');\nwindow.getButtonMore = document.querySelector('.button-more');\n// console.log(getButtonMore);\nconst pageQuantity = 15;\nlet currentPage = 1;\n\ngetForm.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n\n  inputWord = event.currentTarget.querySelector('input').value;\n\n\n  if (inputWord.trim() !== '') {\n    loader.style.display = 'block';\n   \n    fetchData(inputWord, pageQuantity,1)\n      .then(images => {\n                if (images.length === 0) {\n          iziToast.show({\n            title: '!',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            color: \"#EF4040\",\n            messageColor: \"#fff\",\n            titleColor: \"#fff\",\n            position: 'topRight'\n          });\n          getList.innerHTML = '';\n          getForm.reset();\n  \n        } else {\n          getList.innerHTML = images.map(createCard).join('');\n                     currentPage = 1;\n   \n          const lightbox = new SimpleLightbox('.card a', {\n            captionsData: \"title\"\n          });\n             lightbox.refresh();\n          getForm.reset();\n           getButtonMore.classList.remove('is-hidden');\n        }\n\n      })\n      .catch(error => {\n        iziToast.show({\n          title: '!',\n          message: `Error: ${error.message}`,\n          color: \"#EF4040\",\n          messageColor: \"#fff\",\n          titleColor: \"#fff\",\n          position: 'topRight'\n        });\n      })\n      .finally(() => {\n        loader.style.display = 'none';\n      });\n   \n  }\n\n   getButtonMore.classList.add('is-hidden');\n});\nlength\ngetButtonMore.addEventListener('click', async (event) => {\n  // event.preventDefault();\n  currentPage++;\n  try {\n    const additionalImages = await fetchData(inputWord, pageQuantity, currentPage);\n    getList.innerHTML += additionalImages.map(createCard).join('');\n\n    const lightbox = new SimpleLightbox('.card a', {\n      captionsData: \"title\"\n    });\n      scrollPageDown();\n    lightbox.refresh();\n    updateButtonVisibility(additionalImages.length);\n  \n  } catch (error) {\n    console.error(`Error loading more images: ${error.message}`);\n  }\n});\nfunction updateButtonVisibility(imagesCount) {\n    const totalImages = currentPage * pageQuantity;\n    if (imagesCount < pageQuantity || totalImages >= totalHits) {\n        iziToast.show({\n            title: '!',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            color: \"#EF4040\",\n            messageColor: \"#fff\",\n            titleColor: \"#fff\",\n            position: 'topRight'\n        });    \n      getButtonMore.classList.add('is-hidden');\n    \n    } else {\n      getButtonMore.classList.remove('is-hidden');\n    \n    }\n}\nfunction scrollPageDown() {\n  const firstCard = document.querySelector(\".gallery .card\");\n  // console.log(firstCard);\n  if (firstCard) {\n    const rect = firstCard.getBoundingClientRect();\n    const scrollValue = rect.height * 2;\n       window.scrollBy({\n  top: scrollValue,\n  left: 0,\n  behavior: \"smooth\",\n});\n  }\n}\n"],"names":["createCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchData","inputWord","perPage","page","formattedInput","instance","axios","response","error","getForm","getList","loader","pageQuantity","currentPage","event","images","iziToast","SimpleLightbox","additionalImages","lightbox","scrollPageDown","updateButtonVisibility","imagesCount","totalImages","firstCard","scrollValue"],"mappings":"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"}